{
  "scenario_id": "latency-spike-001",
  "scenario_type": "latency-spike",
  "title": "Image Provider Latency Causing Page Load Degradation",
  "description": "Image provider service becomes very slow, causing poor user experience and page load timeouts",
  "start_time": "2024-12-11T09:30:00Z",
  "services": {
    "images": {
      "channel": "#images-alert",
      "oncall_group": "@images-oncall",
      "role": "primary",
      "engineers": [
        "tina"
      ]
    },
    "frontend": {
      "channel": "#frontend-alert",
      "oncall_group": "@frontend-oncall",
      "role": "affected",
      "engineers": [
        "eve"
      ]
    }
  },
  "timeline": [
    {
      "offset_seconds": 0,
      "type": "alert",
      "channel": "#frontend-alert",
      "severity": "warning",
      "title": "\ud83d\udfe1 High Page Load Time - Frontend",
      "details": "Page load times significantly increased\n\n**Current Metrics:**\n\u2022 P95 page load: 6.2s (was 1.1s)\n\u2022 Time to First Byte: 200ms (normal)\n\u2022 Largest Contentful Paint: 6.5s (was 1.2s)\n\u2022 User complaints: 12 in last 5 min",
      "metrics": {
        "p95_page_load": "6.2s",
        "ttfb": "200ms",
        "lcp": "6.5s"
      },
      "dashboard": "https://grafana.company.com/d/frontend-web-vitals",
      "thread_parent": null
    },
    {
      "offset_seconds": 8,
      "type": "message",
      "channel": "#frontend-alert",
      "user": "eve",
      "content": "Page load times are terrible. Users complaining about slow site",
      "thread_parent": 0
    },
    {
      "offset_seconds": 20,
      "type": "message",
      "channel": "#frontend-alert",
      "user": "eve",
      "content": "Looking at waterfall... HTML/JS loading fast but images taking 5-8 seconds \ud83d\udc0c",
      "thread_parent": 0
    },
    {
      "offset_seconds": 30,
      "type": "message",
      "channel": "#frontend-alert",
      "user": "eve",
      "content": "All image requests going to image-provider service. Let me check that service",
      "thread_parent": 0
    },
    {
      "offset_seconds": 40,
      "type": "alert",
      "channel": "#images-alert",
      "severity": "warning",
      "title": "\ud83d\udfe1 High Latency - Image Provider Service",
      "details": "Image serving latency increased dramatically\n\n**Current Metrics:**\n\u2022 P95 latency: 5,800ms (was 45ms)\n\u2022 P99 latency: 8,200ms (was 68ms)\n\u2022 Request rate: 125 req/s (normal)\n\u2022 Error rate: 0%",
      "metrics": {
        "p95_latency": "5800ms",
        "p99_latency": "8200ms",
        "request_rate": "125 req/s",
        "error_rate": "0%"
      },
      "thread_parent": null
    },
    {
      "offset_seconds": 42,
      "type": "message",
      "channel": "#frontend-alert",
      "user": "eve",
      "content": "@images-oncall Image provider latency is crazy high - 5-8 seconds per image. This is killing our page load times",
      "mentions": [
        "@images-oncall"
      ],
      "thread_parent": 0
    },
    {
      "offset_seconds": 45,
      "type": "message",
      "channel": "#images-alert",
      "user": "tina",
      "content": "Seeing it. Checking what changed...",
      "thread_parent": 4
    },
    {
      "offset_seconds": 55,
      "type": "message",
      "channel": "#images-alert",
      "user": "tina",
      "content": "Service is healthy, CPU/memory normal. But every request takes 5+ seconds",
      "thread_parent": 4
    },
    {
      "offset_seconds": 65,
      "type": "message",
      "channel": "#images-alert",
      "user": "tina",
      "content": "Wait... there's an artificial delay in the code. Checking feature flags",
      "thread_parent": 4
    },
    {
      "offset_seconds": 70,
      "type": "message",
      "channel": "#images-alert",
      "user": "tina",
      "content": "`imageSlowLoad` flag is on with \"5sec\" variant. That's the issue!",
      "thread_parent": 4
    },
    {
      "offset_seconds": 75,
      "type": "action",
      "channel": "#images-alert",
      "user": "tina",
      "action_type": "flag_toggle",
      "action_details": "Disabled imageSlowLoad feature flag",
      "content": "```\n$ flagctl set imageSlowLoad off\n```",
      "thread_parent": 4
    },
    {
      "offset_seconds": 80,
      "type": "message",
      "channel": "#images-alert",
      "user": "tina",
      "content": "Latency dropping immediately: 5800ms \u2192 2200ms \u2192 150ms \u2192 48ms \u26a1",
      "thread_parent": 4
    },
    {
      "offset_seconds": 85,
      "type": "message",
      "channel": "#frontend-alert",
      "user": "eve",
      "content": "Page loads are fast again! 6.2s \u2192 2.8s \u2192 1.3s \u2192 1.1s \ud83c\udf89",
      "thread_parent": 0
    },
    {
      "offset_seconds": 90,
      "type": "resolution",
      "channel": "#images-alert",
      "user": "tina",
      "content": "\u2705 **RESOLVED** - Image latency back to normal\n\n**Root Cause:** Feature flag `imageSlowLoad` enabled with 5sec delay\n\n**Fix:** Disabled flag\n\n**Impact:**\n\u2022 Duration: ~1.5 minutes\n\u2022 Page load impact: 5x slower\n\u2022 User experience: severely degraded\n\u2022 SEO impact: temporary Core Web Vitals degradation",
      "metrics_after": {
        "p95_latency": "45ms",
        "p99_latency": "68ms"
      },
      "thread_parent": 4
    },
    {
      "offset_seconds": 95,
      "type": "message",
      "channel": "#frontend-alert",
      "user": "eve",
      "content": "Thanks @tina! Page performance back to normal \u2713",
      "thread_parent": 0
    }
  ],
  "metadata": {
    "severity": "SEV-3",
    "duration_seconds": 95,
    "services_impacted": 2,
    "root_cause": "Feature flag enabled causing artificial delays",
    "resolution": "Disabled feature flag",
    "tags": [
      "latency",
      "images",
      "user-experience",
      "page-load"
    ]
  }
}